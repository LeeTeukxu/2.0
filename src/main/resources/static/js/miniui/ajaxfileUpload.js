jQuery.extend({handleError:function(e,t,n,r){e.error&&e.error.call(e.context||e,t,n,r),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,r])},createUploadIframe:function(e,t){var n="jUploadFrame"+e,r='<iframe id="'+n+'" name="'+n+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&("boolean"==typeof t?r+=' src="javascript:false"':"string"==typeof t&&(r+=' src="'+t+'"')),r+=" />",jQuery(r).appendTo(document.body),jQuery("#"+n).get(0)},createUploadForm:function(e,t,n){var r="jUploadForm"+e,i="jUploadFile"+e,o=jQuery('<form  action="" method="POST" name="'+r+'" id="'+r+'" enctype="multipart/form-data"></form>');if(n)for(var a in n)jQuery('<input type="hidden" name="'+a+'" value="'+n[a]+'" />').appendTo(o);var s="string"==typeof t?jQuery("#"+t):t,u=jQuery(s).clone();return jQuery(s).attr("id",i),jQuery(s).before(u),jQuery(s).appendTo(o),jQuery(o).css("position","absolute"),jQuery(o).css("top","-1200px"),jQuery(o).css("left","-1200px"),jQuery(o).appendTo("body"),o},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),n=jQuery.createUploadForm(t,e.fileElementId,"undefined"==typeof e.data?!1:e.data),r=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),i="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var o=!1,a={};e.global&&jQuery.event.trigger("ajaxSend",[a,e]);var s=function(t){var i=document.getElementById(r);try{i.contentWindow?(a.responseText=i.contentWindow.document.body?i.contentWindow.document.body.innerHTML:null,a.responseXML=i.contentWindow.document.XMLDocument?i.contentWindow.document.XMLDocument:i.contentWindow.document):i.contentDocument&&(a.responseText=i.contentDocument.document.body?i.contentDocument.document.body.innerHTML:null,a.responseXML=i.contentDocument.document.XMLDocument?i.contentDocument.document.XMLDocument:i.contentDocument.document)}catch(s){jQuery.handleError(e,a,null,s)}if(a||"timeout"==t){o=!0;var u;try{if(u="timeout"!=t?"success":"error","error"!=u){var l=jQuery.uploadHttpData(a,e.dataType);e.success&&e.success(l,u),e.global&&jQuery.event.trigger("ajaxSuccess",[a,e])}else jQuery.handleError(e,a,u)}catch(s){u="error",jQuery.handleError(e,a,u,s)}e.global&&jQuery.event.trigger("ajaxComplete",[a,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(a,u),jQuery(i).unbind(),setTimeout(function(){try{jQuery(i).remove(),jQuery(n).remove()}catch(t){jQuery.handleError(e,a,null,t)}},100),a=null}};e.timeout>0&&setTimeout(function(){o||s("timeout")},e.timeout);try{var n=jQuery("#"+i);jQuery(n).attr("action",e.url),jQuery(n).attr("method","POST"),jQuery(n).attr("target",r),n.encoding?jQuery(n).attr("encoding","multipart/form-data"):jQuery(n).attr("enctype","multipart/form-data"),jQuery(n).submit()}catch(u){jQuery.handleError(e,a,null,u)}return jQuery("#"+r).load(s),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}});